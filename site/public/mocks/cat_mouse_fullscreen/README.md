# box-game-2021

大体起了一个框架

大家需要

1. 一个好用的 IDE, 最好是[VSCode](https://code.visualstudio.com/)
2. Prettier/ESLint 支持, 如果是 `VSCode`, 你可以简单的从插件市场下载到
3. 一个包管理器, Switch 使用的是 [Yarn](https://yarnpkg.com/), 希望大家也用

大家可以

1. `git clone` 这个项目
2. `cd` 到项目的根目录
3. `yarn install`

通常来说, 大家所有 `coding` 的工作都放到 index.js 里面就可以了

最后大概我们会使用某种魔法, 把大家的工作放到一段奇怪的 PHP 里面去..

所以完全去操作那一个 canvas 就好, 顺便最好只出现一次 `document.getElementById`, 以免修改 id 太麻烦了

(最好可以不把任何东西暴露到全局, 所以直接都在 `play()` 函数里面写就可以了吧

(当然 如果想的话 也可以搞一些别的 `.js` 文件, 不过要注意好引用的问题 ww

Have fun coding~

# 猫的行为模式

有 3 种模式，分别是随机游走模式、追逐模式、发呆模式。

1. 随机游走模式：开局的时候猫以低速随机游走，撞墙随机改变方向，在路上也有可能随机触发改变方向。如果老鼠和猫的中心点连线段和墙没有相交（老鼠被猫发现），则猫变成追逐模式
2. 追逐模式：猫用 A\* 算法找出一条最优路径追老鼠。如果老鼠在猫的视野中则猫每一帧都会重新修改追击路线；如果看不到老鼠了，就会移动到最后一次看到的老鼠的位置，然后进入发呆模式。
3. 发呆模式：已经追到了最后看到老鼠的位置，但是老鼠不见了，于是进入发呆模式。在发呆模式中，如果看到老鼠会立即变成追逐模式；一直没有看到老鼠过一段时间以后变为随机游走模式。

> 2021.12.22 upd:

1. 修改了老鼠撞墙会卡住的 bug。
2. 猫看到老鼠的判定：猫的中心点看到老鼠的任何一个位置都算看到（不然猫太傻了）
3. 老鼠的控制：假如同时按两个方向键，其中有一个方向被挡住了，会往剩下那个方向键的方向走，而不是被卡在墙上
4. 猫绕墙的策略：修改了猫会绕远路追老鼠的 bug，假如猫撞墙的时候已经探出了墙头，就会直接往最近的方向绕过墙壁。
5. 缩短了猫发呆的时间。
6. 修复了猫猫会因为一直判定撞墙而卡在墙角的问题。

> 2022.1.28 upd:

1. 墙换成贴图。
2. 老鼠洞和猫和老鼠的叠压关系。
3. 地图下方显示的图标替换。
4. 让 gif 动起来。
5. 添加被抓住的动画。

# 玩法介绍

众所周知，BGS 是一个人才辈出的地方。一方水土养一方鼠，在这个环境的熏陶下，你也曾经成为让整个 BGS 闻风丧胆的神偷。但现在你却已经三天没有吃饭了，导致你挨饿的罪魁祸首，就是现在正在悠闲地散步的————虎皮。

经过多日的观察，你已经知道虎皮在没有看到你之前，会一直保持像现在这样的状态散步。虎皮胜过其他猫的地方，就在于他锐利的眼神，好像只要没有建筑物遮挡，即使是在他的身后的东西，他也能很快地察觉到。好在这只猫还不熟悉 BGS 的地形，一旦他追到你消失的位置，就只会在原地打转了。

每偷走一块奶酪可以获得 1 分加分，而偷走地图上所有的奶酪更能表现你对 BGS 所有人(和猫)的嘲讽，从而获得额外的加分。进入地图右下角的洞，你能够通过事先挖好的通道来到下一个地点，并获得 1 点加分。如果你巧妙地躲过了虎皮的巡视，在 10 秒钟内到达下一个地点，也能获得额外的加分。

是时候开始行动了。

# 幕后

策划/
春公 仰泳猩 裸泳耗

技术/
Astar 尤里卡 switch suse

美术/
累以阔 翎翙子 罗尔 Quii 金毛 晚豆

特别鸣谢/
虎皮儿

## 2022.2.2 upd

1. how to play 界面和返回按钮
2. about 界面和返回按钮
3. 更新洞和障碍物的贴图
4. 计分改成右上角，改字体和颜色
