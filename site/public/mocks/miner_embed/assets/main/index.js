System.register("chunks:///_virtual/AudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,i,t,a,l,o,u,r,c,s,p,d,y,b;return{setters:[function(e){n=e.defineProperty,i=e.applyDecoratedDescriptor,t=e.inherits,a=e.createSuper,l=e.classCallCheck,o=e.initializerDefineProperty,u=e.assertThisInitialized,r=e.createClass},function(e){c=e.cclegacy,s=e._decorator,p=e.AudioClip,d=e.AudioSource,y=e.director,b=e.Component}],execute:function(){var m,f,g,A,v,h,k,w,I,z,B,U,C,O,G,R,D,F,P,M,T,W,E,N,S,_,H,q,x,Z,j,K,L,X,J,Q,V,Y,$,ee,ne,ie;c._RF.push({},"8d38abqKthPZZxFTEXqRwiH","AudioController",void 0);var te=s.ccclass,ae=s.property;e("AudioController",(m=te("AudioController"),f=ae(p),g=ae(p),A=ae(p),v=ae(p),h=ae(p),k=ae(p),w=ae(p),I=ae(p),z=ae(p),B=ae(p),U=ae(p),C=ae(p),O=ae(p),G=ae(p),R=ae(p),D=ae(p),F=ae(d),P=ae(d),M=ae(d),m((n(ie=function(e){t(i,e);var n=a(i);function i(){var e;l(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),o(u(e),"buttonClick",E,u(e)),o(u(e),"timeOut",N,u(e)),o(u(e),"gameOver",S,u(e)),o(u(e),"endlessWin",_,u(e)),o(u(e),"endlessFail",H,u(e)),o(u(e),"endlessBegin",q,u(e)),o(u(e),"tntBomb",x,u(e)),o(u(e),"roofBomb",Z,u(e)),o(u(e),"rope",j,u(e)),o(u(e),"bonus",K,u(e)),o(u(e),"catchGold",L,u(e)),o(u(e),"catchDiamond",X,u(e)),o(u(e),"stone",J,u(e)),o(u(e),"hookOut",Q,u(e)),o(u(e),"buyItem",V,u(e)),o(u(e),"warn",Y,u(e)),o(u(e),"gameAudio",$,u(e)),o(u(e),"UIAudio",ee,u(e)),o(u(e),"BGMAudio",ne,u(e)),e}return r(i,[{key:"start",value:function(){null==i.instance?(this.gameAudio.loop=!1,this.gameAudio.volume=.8,this.UIAudio.volume=.7,y.addPersistRootNode(this.node),y.addPersistRootNode(this.UIAudio.node),this.BGMAudio.play(),y.addPersistRootNode(this.BGMAudio.node),i.instance=this):this.destroy()}}],[{key:"playButtonClick",value:function(){i.instance.UIAudio.clip=i.instance.buttonClick,i.instance.UIAudio.play()}},{key:"playTimeOut",value:function(){i.instance.UIAudio.clip=i.instance.timeOut,i.instance.UIAudio.play()}},{key:"playGameOver",value:function(){i.instance.UIAudio.clip=i.instance.gameOver,i.instance.UIAudio.play()}},{key:"playEndlessWin",value:function(){i.instance.UIAudio.clip=i.instance.endlessWin,i.instance.UIAudio.play()}},{key:"playEndlessFail",value:function(){i.instance.UIAudio.clip=i.instance.endlessFail,i.instance.UIAudio.play()}},{key:"playEndlessBegin",value:function(){i.instance.UIAudio.clip=i.instance.endlessBegin,i.instance.UIAudio.play()}},{key:"playWarn",value:function(){i.instance.UIAudio.clip=i.instance.warn,i.instance.UIAudio.play()}},{key:"playTNTBomb",value:function(){i.instance.gameAudio.clip=i.instance.tntBomb,i.instance.gameAudio.play()}},{key:"playRope",value:function(){i.instance.gameAudio.clip=i.instance.rope,i.instance.gameAudio.play()}},{key:"playRoofBomb",value:function(){i.instance.gameAudio.clip=i.instance.roofBomb,i.instance.gameAudio.play()}},{key:"playBonus",value:function(){i.instance.gameAudio.clip=i.instance.bonus,i.instance.gameAudio.play()}},{key:"playCatchGold",value:function(){i.instance.gameAudio.clip=i.instance.catchGold,i.instance.gameAudio.play()}},{key:"playCatchDiamond",value:function(){i.instance.gameAudio.clip=i.instance.catchDiamond,i.instance.gameAudio.play()}},{key:"playStone",value:function(){i.instance.gameAudio.clip=i.instance.stone,i.instance.gameAudio.play()}},{key:"playHookOut",value:function(){i.instance.gameAudio.clip=i.instance.hookOut,i.instance.gameAudio.play()}},{key:"playBuyItem",value:function(){i.instance.gameAudio.clip=i.instance.buyItem,i.instance.gameAudio.play()}}]),i}(b),"instance",null),E=i((W=ie).prototype,"buttonClick",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(W.prototype,"timeOut",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(W.prototype,"gameOver",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(W.prototype,"endlessWin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(W.prototype,"endlessFail",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(W.prototype,"endlessBegin",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(W.prototype,"tntBomb",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(W.prototype,"roofBomb",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(W.prototype,"rope",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(W.prototype,"bonus",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(W.prototype,"catchGold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(W.prototype,"catchDiamond",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(W.prototype,"stone",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(W.prototype,"hookOut",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(W.prototype,"buyItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(W.prototype,"warn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(W.prototype,"gameAudio",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=i(W.prototype,"UIAudio",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=i(W.prototype,"BGMAudio",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=W))||T));c._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonOfDescription.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,c,s,i,u;return{setters:[function(e){t=e.inherits,r=e.createSuper,n=e.createClass,o=e.classCallCheck},function(e){c=e.cclegacy,s=e._decorator,i=e.director,u=e.Component}],execute:function(){var a;c._RF.push({},"f7306HVSa9NoLblqh69VIol","ButtonOfDescription",void 0);var l=s.ccclass;s.property,e("Description",l("Description")(a=function(e){t(s,e);var c=r(s);function s(){return o(this,s),c.apply(this,arguments)}return n(s,[{key:"ClosePage",value:function(e){i.resume();var t=i.getScene();this.node.parent=t,this.node.active=!1,this.node.destroy()}}]),s}(u))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/CommodityData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,o,c,u,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inherits,i=e.createSuper,n=e.classCallCheck,a=e.initializerDefineProperty,o=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,l=e._decorator,s=e.Component}],execute:function(){var p,f,m,y,d,h,b;u._RF.push({},"ee70edsLJJFsIihcXjusFj4","CommodityData",void 0);var g=l.ccclass,v=l.property;e("CommodityData",(p=g("CommodityData"),f=v({multiline:!0}),p((d=t((y=function(e){r(u,e);var t=i(u);function u(){var e;n(this,u);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),a(o(e),"_price",d,o(e)),a(o(e),"leftNum",h,o(e)),a(o(e),"description",b,o(e)),e}return c(u,[{key:"price",get:function(){return this._price},set:function(e){this._price=e}}]),u}(s)).prototype,"_price",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 75}}),h=t(y.prototype,"leftNum",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=t(y.prototype,"description",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=y))||m));u._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,s,l,r,a,g,h,c,p,C,d,u,m,v,T,f,L,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inherits,i=e.createSuper,n=e.classCallCheck,s=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.defineProperty,a=e.createClass},function(e){g=e.cclegacy,h=e._decorator,c=e.Node,p=e.Color,C=e.Canvas,d=e.UITransform,u=e.instantiate,m=e.Label,v=e.RichText,T=e.Toggle,f=e.Button,L=e.director,M=e.Component}],execute:function(){var b,x,y,E,S,I,A,D,B;g._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var k=h.ccclass,w=h.property;e("DebugViewRuntimeControl",(b=k("internal.DebugViewRuntimeControl"),x=w(c),y=w(c),E=w(c),b((A=t((I=function(e){o(g,e);var t=i(g);function g(){var e;n(this,g);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),s(l(e),"compositeModeToggle",A,l(e)),s(l(e),"singleModeToggle",D,l(e)),s(l(e),"EnableAllCompositeModeButton",B,l(e)),r(l(e),"_single",0),r(l(e),"strSingle",["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"]),r(l(e),"strComposite",["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"]),r(l(e),"strMisc",["CSM Layer Coloration","Lighting With Albedo"]),r(l(e),"compositeModeToggleList",[]),r(l(e),"singleModeToggleList",[]),r(l(e),"miscModeToggleList",[]),r(l(e),"textComponentList",[]),r(l(e),"labelComponentList",[]),r(l(e),"textContentList",[]),r(l(e),"hideButtonLabel",void 0),r(l(e),"_currentColorIndex",0),r(l(e),"strColor",["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"]),r(l(e),"color",[p.WHITE,p.BLACK,p.RED,p.GREEN,p.BLUE]),e}return a(g,[{key:"start",value:function(){if(this.node.parent.getComponent(C)){var e=this.node.parent.getComponent(d),t=.5*e.width,o=.5*e.height,i=.1*t-t,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=u(s);l.parent=this.node,l.name="Buttons";var r=u(s);r.parent=this.node,r.name="Titles";for(var a=0;a<2;a++){var g=u(this.EnableAllCompositeModeButton.getChildByName("Label"));g.setPosition(i+(a>0?450:150),n,0),g.setScale(.75,.75,.75),g.parent=r;var h=g.getComponent(m);h.string=a?"----------Composite Mode----------":"----------Single Mode----------",h.color=p.WHITE,h.overflow=0,this.labelComponentList[this.labelComponentList.length]=h}n-=20;for(var c=0,L=0;L<this.strSingle.length;L++,c++){L===this.strSingle.length>>1&&(i+=200,c=0);var M=L?u(this.singleModeToggle):this.singleModeToggle;M.setPosition(i,n-20*c,0),M.setScale(.5,.5,.5),M.parent=this.singleModeToggle.parent;var b=M.getComponentInChildren(v);b.string=this.strSingle[L],this.textComponentList[this.textComponentList.length]=b,this.textContentList[this.textContentList.length]=b.string,M.on(T.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[L]=M}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(f.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(m);this.labelComponentList[this.labelComponentList.length]=x;var y=u(this.EnableAllCompositeModeButton);y.setPosition(i+90,n,0),y.setScale(.5,.5,.5),y.on(f.EventType.CLICK,this.changeTextColor,this),y.parent=l,(x=y.getComponentInChildren(m)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var E=u(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(f.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(x=E.getComponentInChildren(m)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var S=0;S<this.strMisc.length;S++){var I=u(this.compositeModeToggle);I.setPosition(i,n-20*S,0),I.setScale(.5,.5,.5),I.parent=s;var A=I.getComponentInChildren(v);A.string=this.strMisc[S],this.textComponentList[this.textComponentList.length]=A,this.textContentList[this.textContentList.length]=A.string,I.getComponent(T).isChecked=!!S,I.on(T.EventType.TOGGLE,S?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[S]=I}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?u(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var k=B.getComponentInChildren(v);k.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=k,this.textContentList[this.textContentList.length]=k.string,B.on(T.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")}},{key:"isTextMatched",value:function(e,t){var o=new String(e),i=o.search(">");return-1===i?e===t:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===t}},{key:"toggleSingleMode",value:function(e){for(var t=L.root.debugView,o=e.getComponentInChildren(v),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(t.singleMode=i)}},{key:"toggleCompositeMode",value:function(e){for(var t=L.root.debugView,o=e.getComponentInChildren(v),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&t.enableCompositeMode(i,e.isChecked)}},{key:"toggleLightingWithAlbedo",value:function(e){L.root.debugView.lightingWithAlbedo=e.isChecked}},{key:"toggleCSMColoration",value:function(e){L.root.debugView.csmLayerColoration=e.isChecked}},{key:"enableAllCompositeMode",value:function(e){var t=L.root.debugView;t.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(T).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(T);i.isChecked=!1,t.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(T)).isChecked=!0,t.lightingWithAlbedo=!0}},{key:"hideUI",value:function(e){var t=this.node.getChildByName("Titles"),o=!t.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,t.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}},{key:"changeTextColor",value:function(e){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]}},{key:"onLoad",value:function(){}},{key:"update",value:function(e){}}]),g}(M)).prototype,"compositeModeToggle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"singleModeToggle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(I.prototype,"EnableAllCompositeModeButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=I))||S));g._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIController.ts","./PlayerData.ts","./SceneController.ts","./AudioController.ts","./index.mjs_cjs=&original=.js","./index.js"],(function(e){"use strict";var t,a,n,i,r,l,o,s,u,c,y,m,p,g,d,v,f,h,k,D,T,P,b,B,C;return{setters:[function(e){t=e.defineProperty,a=e.applyDecoratedDescriptor,n=e.inherits,i=e.createSuper,r=e.classCallCheck,l=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){u=e.cclegacy,c=e._decorator,y=e.Prefab,m=e.UIOpacity,p=e.Label,g=e.Node,d=e.AnimationComponent,v=e.find,f=e.NodeEventType,h=e.director,k=e.instantiate,D=e.Component},function(e){T=e.UIController},function(e){P=e.PlayerData},function(e){b=e.SceneController},function(e){B=e.AudioController},null,function(e){C=e.default}],execute:function(){var N,O,S,z,G,L,A,E,I,w,R,F,M,U,H,_,j,x;u._RF.push({},"bcad5Cgm0pFb72aVHBgkF/x","GameController",void 0);var J=c.ccclass,V=c.property;e("GameController",(N=J("GameController"),O=V({type:y}),S=V(m),z=V({group:{name:"结算面板"},type:p}),G=V({group:{name:"结算面板"},type:g}),L=V({group:{name:"结算面板"},type:d}),A=V({group:{name:"结算面板"},type:d}),E=V(g),N((x=function(e){n(u,e);var a=i(u);function u(){var e;r(this,u);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=a.call.apply(a,[this].concat(i)),l(o(e),"description",R,o(e)),t(o(e),"leftTime",void 0),t(o(e),"playerData",null),l(o(e),"TipBoardOpacity",F,o(e)),t(o(e),"isGameOver",void 0),t(o(e),"miner",null),l(o(e),"SubmitButtonLabel",M,o(e)),l(o(e),"EndlessInform",U,o(e)),l(o(e),"puzzleAni",H,o(e)),l(o(e),"blueBlingAni",_,o(e)),l(o(e),"EndlessLevelBoard",j,o(e)),e}return s(u,[{key:"onLoad",value:function(){this.playerData=v("PlayerData").getComponent(P),this.playerData.isEndlessMode?(this.EndlessLevelBoard.active=!0,this.EndlessLevelBoard.getComponentInChildren(p).string="第 ".concat(this.playerData.level," 关\n目标分:").concat(this.playerData.targetMoney)):(C.captureMessage("EnterGame!"),P.hasPlay=!0,this.EndlessLevelBoard.active=!1);var e=u.instance=this;e.setUserName(),e.leftTime=e.playerData.totalTime,T.setTime(e.leftTime),T.setScore(e.playerData.money),e.TipBoardOpacity.node.on(f.TOUCH_START,e.macroHookDown,e),e.playerData.isFirstTimePlay?(e.isGameOver=!0,e.TipBoardOpacity.opacity=255):e.letGameBegin()}},{key:"macroHookDown",value:function(){var e=u.instance;e.playerData.isFirstTimePlay?(e.playerData.isFirstTimePlay=!1,e.letGameBegin()):e.miner.hookDown(null,0)}},{key:"letGameBegin",value:function(){var e=u.instance;console.log("gameBegin"),e.TipBoardOpacity.opacity=0,e.isGameOver=!1,e.schedule(e.setTime,1)}},{key:"setUserName",value:function(){h.getScene().getChildByName("Canvas").getChildByName("UIDashBoard").getChildByName("IdBoard").getChildByName("Id").getComponent(p).string=u.getPlayerData().playerName}},{key:"setTime",value:function(){var e=--u.instance.leftTime;if(e<=0)return this.unschedule(this.setTime),void u.gameOver();3==e&&B.playTimeOut(),T.setTime(e)}},{key:"seeIntroduction",value:function(e,t){if(!u.instance.isGameOver){var a=h.getScene(),n=a.getChildByName("Canvas"),i=k(u.instance.description);a.addChild(i),i.setPosition(0,0),i.parent=n,h.pause()}}},{key:"continueGame",value:function(e,t){h.resume()}},{key:"goToRank",value:function(e){console.log("ToRankPage");var t=u.getPlayerData(),a="";t.isEndlessMode?t.money>=t.targetMoney?(t.dataToNextLevel(),a="TrialHall"):a="StartPage":a="RankPage",b.loadScene(a)}}],[{key:"registerMiner",value:function(e){u.instance.miner=e}},{key:"getPlayerData",value:function(){return u.instance.playerData}},{key:"getTotalTime",value:function(){return u.getPlayerData().totalTime}},{key:"getScore",value:function(){return u.getPlayerData().money}},{key:"setProfit",value:function(e){u.getPlayerData().money+=e}},{key:"getTNTNum",value:function(){return u.getPlayerData().TNTNum}},{key:"setTNTNum",value:function(e){u.getPlayerData().TNTNum=e}},{key:"setDiamondPolish",value:function(){u.getPlayerData().isDiamondPolish=!0}},{key:"getDiamondPolish",value:function(){return u.getPlayerData().isDiamondPolish}},{key:"setLucky",value:function(){u.getPlayerData().isLucky=!0}},{key:"getLucky",value:function(){return u.getPlayerData().isLucky}},{key:"setRockAppreciate",value:function(){u.getPlayerData().isRockAppreciate=!0}},{key:"getRockAppreciate",value:function(){return u.getPlayerData().isRockAppreciate}},{key:"setStrengthen",value:function(){u.getPlayerData().isStrengthen=!0}},{key:"getStrengthen",value:function(){return u.getPlayerData().isStrengthen}},{key:"getIsGameOver",value:function(){return u.instance.isGameOver}},{key:"gameOver",value:function(){u.instance.isGameOver=!0,P.hasJustFinish=!0,u.gameOverRouter()}},{key:"gameOverRouter",value:function(){var e=u.getPlayerData(),t=u.instance.EndlessInform,a=u.instance.SubmitButtonLabel;if(e.isEndlessMode){t.active=!0;var n=t.getComponentInChildren(p),i=t.getChildByName("puzzling"),r=t.getChildByName("blueBlingBling");e.money>=e.targetMoney?(i.active=!1,r.active=!0,n.string="恭喜你，完成目标！",u.instance.blueBlingAni.play(),B.playEndlessWin(),a.string="进入下一关"):(i.active=!0,r.active=!1,u.instance.puzzleAni.play(),B.playEndlessFail(),n.string="很遗憾，没能达成目标。。",a.string="返回主菜单")}else B.playGameOver(),t.active=!1,a.string="提交结果";T.ShowFinalScore(e.money)}}]),u}(D),t(x,"instance",null),R=a((w=x).prototype,"description",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=a(w.prototype,"TipBoardOpacity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=a(w.prototype,"SubmitButtonLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=a(w.prototype,"EndlessInform",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=a(w.prototype,"puzzleAni",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=a(w.prototype,"blueBlingAni",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=a(w.prototype,"EndlessLevelBoard",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=w))||I));u._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConst.ts",["cc","./ShopLogic.ts"],(function(t){"use strict";var a,e;return{setters:[function(t){a=t.cclegacy},function(t){e=t.CommoType}],execute:function(){var n;t("LevelConst",void 0),a._RF.push({},"565dbZVrIpB95PO2FVU3/Ws","LevelConst",void 0),function(t){var a=[3,5,10],n={3:[{startX:.1,endX:.5,startY:.32,endY:1,allocate:{GptDiamond:1,EarlyEight:1,EarlyTen:3}},{startX:.5,endX:1,startY:.3,endY:.9,allocate:{GptDiamond:2,EarlyEight:2,EarlyTen:2}},{startX:.1,endX:1,startY:0,endY:.32,allocate:{RandomBag:1,GptDiamond:2,EarlyTen:2}}],5:[{startX:.05,endX:1,startY:.45,endY:1,allocate:{EarlyTen:2,BareStudent:5,CatGoldSmall:2}},{startX:.4,endX:1,startY:0,endY:.5,allocate:{BareStudent:2,EarlyTen:1,GptStudent:2,CatGoldMiddle:1}}],10:[{startX:0,endX:.6,startY:0,endY:.98,allocate:{GptDiamond:2,TNT:2,CatGoldMiddle:2}},{startX:.58,endX:1,startY:0,endY:.95,allocate:{TNT:4,GptDiamond:4,CatGoldSmall:3,CatGoldMiddle:1}}]},l=[8,15];t.getLevelMap=function(t){return-1!==l.indexOf(t)?null:-1!==Object.keys(n).indexOf(t.toString())?n[t]:function(t){var a=[];t<3?a.push({startX:0,endX:.6,startY:.4,endY:1,allocate:{CatGoldSmall:r(2,4),CatGoldMiddle:r(2,3),EarlyEight:r(0,1),EarlyTen:r(1,4)}},{startX:.6,endX:1,startY:.38,endY:.95,allocate:{CatGoldMiddle:r(1,3),EarlyTen:r(2,4),RandomBag:r(0,r(0,1)),CatGoldSmall:r(2,3)}},{startX:.1,endX:.95,startY:0,endY:.4,allocate:{CatGoldLarge:0===r(0,2)?0===r(0,3)?3:2:1,EarlyEight:r(0,1)}}):t<7?a.push({startX:.05,endX:.98,startY:.5,endY:.95,allocate:{GptDiamond:0===r(0,2)?0===r(0,4)?3:2:1,EarlyEight:r(1,2),EarlyTen:r(2,4),CatGoldMiddle:r(1,4),CatGoldSmall:r(1,5),RandomBag:r(0,1)}},{startX:.5,endX:.95,startY:0,endY:.8,allocate:{CatGoldLarge:r(1,3),RandomBag:r(0,2),GptDiamond:0===r(0,2)?0===r(0,4)?2:1:0,EarlyEight:r(0,2),CatGoldSmall:r(0,3)}}):t<=10?a.push({startX:.05,endX:.6,startY:.4,endY:.95,allocate:{CatGoldSmall:r(2,4),BareStudent:r(1,5),EarlyEight:r(1,3),EarlyTen:2,RandomBag:1}},{startX:.62,endX:.98,startY:.05,endY:.88,allocate:{CatGoldMiddle:2,BareStudent:r(2,4),EarlyTen:1,GptStudent:0===r(0,2)?0===r(0,1)?2:1:0}},{startX:0,endX:.6,startY:0,endY:.4,allocate:{GptStudent:r(1,2),CatGoldLarge:0===r(0,1)?0===r(0,3)?2:1:0,GptDiamond:0===r(0,2)?0===r(0,4)?3:2:1}}):t<15?a.push({startX:.05,endX:.5,startY:.1,endY:.85,allocate:{TNT:r(1,3),GptDiamond:1,CatGoldLarge:1,CatGoldMiddle:r(1,3),GptStudent:0===r(0,1)?0===r(0,4)?3:2:1,EarlyEight:2}},{startX:.52,endX:1,startY:.05,endY:.75,allocate:{TNT:r(2,4),GptDiamond:0===r(0,2)?0===r(0,3)?2:1:0,BareStudent:r(2,4),EarlyEight:1,EarlyTen:2,CatGoldLarge:r(1,2),CatGoldSmall:r(1,4),RandomBag:r(0,1)}}):a.push({startX:.05,endX:.5,startY:.4,endY:.95,allocate:{TNT:r(0,2),CatGoldMiddle:r(1,3),GptStudent:0===r(0,2)?0===r(0,1)?2:1:0,EarlyEight:r(0,2),EarlyTen:r(1,3),CatGoldSmall:r(1,4),RandomBag:r(0,1)}},{startX:.52,endX:1,startY:.38,endY:.85,allocate:{TNT:0===r(0,2)?0===r(0,2)?0===r(0,1)?3:2:1:0,GptDiamond:0===r(0,1)?0===r(0,1)?0===r(0,1)?3:2:1:0,BareStudent:r(0,4),EarlyEight:0===r(0,2)?(r(0,1),2):1,EarlyTen:r(1,5),CatGoldLarge:0===r(0,1)?0===r(0,2)?0===r(0,1)?3:2:1:0,CatGoldSmall:r(1,5),CatGoldMiddle:r(1,4)}},{startX:0,endX:.65,startY:.02,endY:.38,allocate:{TNT:r(0,1),GptDiamond:0===r(0,1)?0===r(0,2)?0===r(0,3)?3:0:2:1,CatGoldMiddle:1,CatGoldLarge:0===r(0,1)?0===r(0,2)?0===r(0,2)?3:0:2:1,RandomBag:0===r(0,1)?0===r(0,2)?2:1:0,GptStudent:0===r(0,1)?0===r(0,2)?0===r(0,3)?3:2:1:0}},{startX:.62,endX:1,startY:0,endY:.4,allocate:{GptDiamond:0===r(0,3)?1:0,CatGoldLarge:0===r(0,3)?1:0,BareStudent:r(0,1),CatGoldSmall:r(0,2),GptStudent:0===r(0,2)?1:0}});return a}(t)},t.getLevelTime=function(t){return t<a[1]?40:t<a[2]?42:-1!==l.indexOf(t)?28:40+r(-5,8)},t.getLevelTarget=function(t,e){return e+(t<a[0]?500:t===a[0]?1e3:t<l[0]?1200+r(0,600):t===l[0]?3500:t<a[2]?1100:t===a[2]?900:t<l[1]?1100:t===l[1]?5e3:950+r(0,450))};var d=t.OriginalPrice=[75,80,75,50,150];function r(t,a){return Math.floor(Math.random()*(a-t+1)+t)}t.getPriceAdjust=function(t,a,o){var i=d[a];return i*=(.06*Math.random()+1.01)*(t<15?Math.ceil(t/4):6),i=Math.round(i),o?i+=r(30,200):i>120&&(i-=r(50,110)),a!==e.DIAMOND||-1===Object.keys(n).indexOf(t.toString())&&t!==l[1]||(i+=600),a===e.STRENGTH&&-1!==l.indexOf(t)&&(i+=400),i},t.randBetween=r,t.getOreMarginTop=function(t){return Math.floor(2*Math.sqrt(t))},t.getOreMarginLeft=function(t){return Math.floor(1.2*Math.sqrt(t))},t.getOreGap=function(){return{width:r(50,450),height:r(50,150)}},t.rollWhetherGap=function(){return r(0,4)<=2}}(n||(n=t("LevelConst",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelJudger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts","./PlayerData.ts","./SceneController.ts","./LevelConst.ts"],(function(e){"use strict";var t,n,l,r,i,a,o,c,s,u,p,v,g,f,L,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,l=e.createSuper,r=e.classCallCheck,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){c=e.cclegacy,s=e._decorator,u=e.Label,p=e.find,v=e.Component},function(e){g=e.AudioController},function(e){f=e.PlayerData},function(e){L=e.SceneController},function(e){d=e.LevelConst}],execute:function(){var y,b,h,C,S,m,D;c._RF.push({},"1b536RpDYFJdLWv6lH7xnBr","LevelJudger",void 0);var J=s.ccclass,P=s.property;e("LevelJudger",(y=J("LevelJudger"),b=P(u),h=P(u),y((m=t((S=function(e){n(c,e);var t=l(c);function c(){var e;r(this,c);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l)),i(a(e),"titleLabel",m,a(e)),i(a(e),"contentLabel",D,a(e)),e}return o(c,[{key:"start",value:function(){g.playEndlessBegin();var e=p("PlayerData").getComponent(f),t=d.getLevelTarget(e.level,e.targetMoney);this.titleLabel.string="第 "+e.level.toString()+" 关",this.contentLabel.string="目标分："+t.toString(),e.targetMoney=t,e.totalTime=d.getLevelTime(e.level),this.scheduleOnce((function(){L.loadScene("Shop")}),2.8)}}]),c}(v)).prototype,"titleLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(S.prototype,"contentLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=S))||C));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioController.ts","./ButtonOfDescription.ts","./GameController.ts","./MineMap.ts","./MinerController.ts","./OreLogic.ts","./UIController.ts","./PlayerData.ts","./Messenger.ts","./RankController.ts","./SceneController.ts","./CommodityData.ts","./ShopLogic.ts","./PingServer.ts","./StartPage.ts","./LevelConst.ts","./LevelJudger.ts","./debug-view-runtime-control.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Messenger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerData.ts","./PingServer.ts","./RankController.ts","./index.mjs_cjs=&original=.js","./index.js"],(function(e){"use strict";var t,n,s,o,i,a,r,c,h,u,l,d,g,y,f;return{setters:[function(e){t=e.inherits,n=e.createSuper,s=e.classCallCheck,o=e.defineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,c=e._decorator,h=e.find,u=e.sys,l=e.Component},function(e){d=e.PlayerData},function(e){g=e.PingServer},function(e){y=e.RankController},null,function(e){f=e.default}],execute:function(){var k;r._RF.push({},"3011e5bANJIb6AAWlzqoTbH","Messenger",void 0);var p=c.ccclass;c.property,e("Messenger",p("Messenger")(k=function(e){t(c,e);var r=n(c);function c(){var e;s(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),o(i(e),"path",""),o(i(e),"PD",void 0),o(i(e),"topNum",100),o(i(e),"historyHigh",0),o(i(e),"historyRank",0),e}return a(c,[{key:"start",value:function(){this.path=g.path,this.PD=h("PlayerData").getComponent(d);var e=u.localStorage.getItem(d.highScoreLocalKey);console.log(e),null==e&&(e="0");var t=parseInt(e);this.historyHigh=t,d.hasPlay&&d.hasJustFinish&&!this.PD.isEndlessMode?(y.showTwoScore(this.PD.money,t),y.showLoading(),this.submit()):(d.hasPlay&&y.showTwoScore(this.PD.money,t),this.getRank(),this.getHistoryRank())}},{key:"getHistoryRank",value:function(){var e=this;fetch(this.path+"/user_score?userid="+this.PD.getUserId(),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t=t.data,console.log("success get user rank!"),y.showHisScore(e.historyHigh),e.historyRank=t.user.rank})).catch((function(t){e.failLoading(t)}))}},{key:"reSubmit",value:function(){y.showLoading(),this.submit()}},{key:"submit",value:function(){var e=this,t=this.historyHigh,n=this.PD.getUserId(),s={username:this.PD.playerName,score:this.PD.money,userid:n};fetch(this.path+"/submit",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(s){s=s.data,y.successLoading(),e.getRank(),y.showUserRank(s.user.rank,((s.total-s.user.rank+1)/s.total*100).toFixed(1)),e.historyRank=s.user.rank,""==n&&(n=s.user.userid,u.localStorage.setItem(d.userIdLocalKey,n)),e.PD.setUserId(n),e.PD.money>t&&(t=e.PD.money,u.localStorage.setItem(d.highScoreLocalKey,t.toString())),f.captureMessage("FinishGame!")})).catch((function(t){e.failLoading(t)}))}},{key:"showReward",value:function(){y.showReward(this.PD.getUserId(),this.historyRank)}},{key:"hideReward",value:function(){y.closeReward()}},{key:"failLoading",value:function(e){y.failLoading(),console.log(e)}},{key:"copy",value:function(){y.copy(this.PD.getUserId())}},{key:"getRank",value:function(){var e=this;fetch(this.path+"/top_scores?n="+this.topNum.toString(),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log("success get whole rank!"),y.showWholeRank(e.data)})).catch((function(t){e.failLoading(t)}))}}]),c}(l))||k);r._RF.pop()}}}));

System.register("chunks:///_virtual/MineMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelConst.ts","./GameController.ts"],(function(e){"use strict";var t,i,r,n,a,o,s,h,l,d,c,f,u,p,g,m,v,y,_,w;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,r=e.inherits,n=e.createSuper,a=e.classCallCheck,o=e.initializerDefineProperty,s=e.assertThisInitialized,h=e.createClass,l=e.createForOfIteratorHelper},function(e){d=e.cclegacy,c=e._decorator,f=e.Prefab,u=e.instantiate,p=e.tween,g=e.Vec3,m=e.UITransform,v=e.Node,y=e.Component},function(e){_=e.LevelConst},function(e){w=e.GameController}],execute:function(){var b,O,C,M,k,G,P,x,S,E,R;d._RF.push({},"b1e105C9xZETLiFfDCkJxbv","MineMap",void 0);var z=c.ccclass,I=c.property;e("MineMap",(b=z("MineMap"),O=I({type:[f],group:{name:"矿物预制体"}}),C=I({type:[f],group:{name:"特殊关卡"}}),b((R=function(e){r(d,e);var i=n(d);function d(){var e;a(this,d);for(var r=arguments.length,n=new Array(r),h=0;h<r;h++)n[h]=arguments[h];return e=i.call.apply(i,[this].concat(n)),o(s(e),"orePrefabs",G,s(e)),o(s(e),"oreCount",P,s(e)),o(s(e),"BombNum",x,s(e)),o(s(e),"isContinuous",S,s(e)),o(s(e),"specialLevel",E,s(e)),t(s(e),"speciallevelIndex",0),t(s(e),"_spawnedOres",{BareStudent:1,CatGoldLarge:2,CatGoldMiddle:2,CatGoldSmall:2,EarlyEight:2,EarlyTen:2,GptDiamond:2,GptStudent:1,RandomBag:2,TNT:0}),t(s(e),"_isRockAppreciate",!1),t(s(e),"_rockNodes",[]),t(s(e),"_diamondIndex",0),t(s(e),"contentSize",{width:0,height:0}),t(s(e),"mapGrid",[]),t(s(e),"mapGridLeft",[]),t(s(e),"_gridWidth",0),t(s(e),"_gridHeight",0),t(s(e),"_posOffsetRange",{x:0,y:0}),t(s(e),"_columnCount",4),t(s(e),"_rowCount",4),e}return h(d,[{key:"start",value:function(){var e,t=this;if(this.init(),w.getPlayerData().isEndlessMode){this.isContinuous=!1;var i=_.getLevelMap(w.getPlayerData().level);if(null===i){var r=u(this.specialLevel[w.getPlayerData().level<10?0:1]);this.node.addChild(r)}else this.placeOreByOrder(i)}else for(var n=0;n<this.oreCount;n++){var a=Object.keys(this._spawnedOres).filter((function(e){return t._spawnedOres[e]>0}));if(0===a.length)break;var o=this.findOreIndexByName(a[Math.floor(Math.random()*a.length)]);this._spawnedOres[this.orePrefabs[o].name]--,e=u(this.orePrefabs[o]),this.spawnOre(e),"EarlyEight"!=this.orePrefabs[o].name&&"EarlyTen"!=this.orePrefabs[o].name||this._rockNodes.push(e)}for(var s=0;s<this._rowCount;s++)for(var h=0;h<this._columnCount;h++)this.mapGrid[s][h]||this.mapGridLeft.push({r:h,c:s})}},{key:"update",value:function(e){var t=this;if(!w.getIsGameOver()){if(this._isRockAppreciate&&this._rockNodes.length>0){this._isRockAppreciate=!1,console.log("早八，给我变！");var i=Math.floor(Math.random()*this._rockNodes.length),r=this._rockNodes[i],n=r.getPosition();p().target(r).to(.5,{angle:360,scale:g.ZERO}).call((function(){r.destroy();var e=u(t.orePrefabs[t._diamondIndex]),i=e.getScale();e.setScale(g.ZERO),p().target(e).to(.4,{angle:360,scale:i}).start(),t.node.addChild(e),e.setPosition(n)})).start()}if(this.isContinuous&&this.mapGridLeft.length>3){var a=Math.floor(10*Math.random()),o=u(this.orePrefabs[a]),s=this.spawnOre(o),h=o.getScale();o.setScale(g.ZERO),p().target(o).to(1,{angle:360,scale:h}).start(),this.mapGridLeft.splice(this.mapGridLeft.indexOf({r:s[0],c:s[1]})),console.log("生成了："+o.name)}}}},{key:"init",value:function(){for(var e=0;e<this.orePrefabs.length;e++)if("GptDiamond"==this.orePrefabs[e].name){this._diamondIndex=e;break}this.contentSize=this.node.getComponent(m).contentSize,this._gridWidth=this.contentSize.width/this._columnCount,this._gridHeight=this.contentSize.height/this._rowCount,this._posOffsetRange={x:this._gridWidth/4,y:this._gridHeight/4};for(var t=0;t<this._rowCount;t++){this.mapGrid.push([]);for(var i=0;i<this._columnCount;i++)this.mapGrid[t].push(!1)}this._spawnedOres.TNT=this.BombNum,this._isRockAppreciate=w.getRockAppreciate(),console.log("石头变钻石技能："+this._isRockAppreciate)}},{key:"spawnOre",value:function(e){for(var t=this,i=Math.floor(Math.random()*this._rowCount),r=Math.floor(Math.random()*this._columnCount);this.mapGrid[i][r];)i=Math.floor(Math.random()*this._rowCount),r=Math.floor(Math.random()*this._columnCount);this.mapGrid[i][r]=!0,this.node.addChild(e),e.on(v.EventType.NODE_DESTROYED,(function(){w.getIsGameOver()||(t.mapGrid[i][r]=!1,t.mapGridLeft.push({r:i,c:r}),console.log(e.name+"被销毁 "+i+","+r))}));var n=new g(Math.random()*this._posOffsetRange.x,Math.random()*this._posOffsetRange.y,0);return n.x=Math.random()>.5?n.x:-n.x,n.y=Math.random()>.5?n.y:-n.y,e.setPosition((r+.5)*this._gridWidth+n.x,(i+.5)*this._gridHeight+n.y,0),[i,r]}},{key:"findOreIndexByName",value:function(e){return this.orePrefabs.findIndex((function(t){return t.name===e}))}},{key:"placeOreByOrder",value:function(e){var t,i=this,r=l(e);try{var n=function(){var e=t.value,r=[{x:i.contentSize.width*e.startX,y:i.contentSize.width*e.startY,width:i.contentSize.width*(e.endX-e.startX),height:i.contentSize.height*(e.endY-e.startY)}],n=Object.assign(e.allocate),a=[];do{if(0===(a=Object.keys(n).filter((function(e){return n[e]>0}))).length)break;var o=i.findOreIndexByName(a[Math.floor(Math.random()*a.length)]);if(-1===o){console.error("cannot find a rare ore, whose name can't be recognized");break}n[i.orePrefabs[o].name]--;var s=u(i.orePrefabs[o]),h=Object.assign(s.getComponent(m).contentSize),l=_.getOreMarginTop(h.height),d=_.getOreMarginLeft(h.width);h.height+=2*l,h.width+=2*d,_.rollWhetherGap()&&i.shelfOneIntoGrid(r,_.getOreGap());var c=i.shelfOneIntoGrid(r,h);c!==g.ZERO&&(c=c.add3f(_.randBetween(-d,d),_.randBetween(-l,l),0),i.node.addChild(s),s.setPosition(c),"EarlyEight"!=i.orePrefabs[o].name&&"EarlyTen"!=i.orePrefabs[o].name||i._rockNodes.push(s))}while(a.length>0)};for(r.s();!(t=r.n()).done;)n()}catch(e){r.e(e)}finally{r.f()}}},{key:"shelfOneIntoGrid",value:function(e,t){for(var i=0;i<e.length;i++)if(e[i].height>=t.height&&e[i].width>=t.width){var r={x:e[i].x+t.width,y:e[i].y,width:e[i].width-t.width,height:t.height},n={x:e[i].x,y:e[i].y+t.height,width:e[i].width,height:e[i].height-t.height},a=new g(e[i].x+t.width/2,e[i].y+t.height/2,0);return e.splice(i,1),this.insertShelf(r,e),this.insertShelf(n,e),a}return g.ZERO}},{key:"insertShelf",value:function(e,t){if(!(e.height<d.MinWidth||e.width<d.MinWidth)){for(var i=t.length-1;i>=0&&t[i].width>e.width;)t[i+1]=t[i],i--;t[i+1]=e}}},{key:"placeOneIntoGrid",value:function(e,t,i){return g.ZERO}}]),d}(y),t(R,"MinWidth",50),G=i((k=R).prototype,"orePrefabs",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(k.prototype,"oreCount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),x=i(k.prototype,"BombNum",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),S=i(k.prototype,"isContinuous",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=i(k.prototype,"specialLevel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=k))||M));d._RF.pop()}}}));

System.register("chunks:///_virtual/MinerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts","./GameController.ts","./OreLogic.ts","./UIController.ts"],(function(e){"use strict";var t,i,o,r,n,s,l,a,h,u,p,g,c,d,b,y,f,m,k,N,T,S,v,B,z,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.createSuper,r=e.classCallCheck,n=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.defineProperty,a=e.createClass},function(e){h=e.cclegacy,u=e._decorator,p=e.Node,g=e.SpriteFrame,c=e.Prefab,d=e.Sprite,b=e.Label,y=e.AnimationComponent,f=e.Vec3,m=e.Collider2D,k=e.Contact2DType,N=e.Color,T=e.instantiate,S=e.Component},function(e){v=e.AudioController},function(e){B=e.GameController},function(e){z=e.OreLogic},function(e){C=e.UIController}],execute:function(){var P,w,D,A,O,I,H,L,M,R,V,x,F,G,U,_,E,X,W,j,q,J,K,Q,Y,Z,$,ee,te,ie,oe,re,ne,se,le,ae,he,ue;h._RF.push({},"f0e2aTu1FlGvrzNGoa7dLB9","MinerController",void 0);var pe=u.ccclass,ge=u.property;e("MinerController",(P=pe("MinerController"),w=ge({serializable:!0}),D=ge({group:{name:"钩子相关"},type:p}),A=ge({group:{name:"钩子相关"},type:g}),O=ge({group:{name:"钩子相关"},type:g}),I=ge({group:{name:"矿工水平移动"},type:p}),H=ge({group:{name:"矿工水平移动"}}),L=ge({group:{name:"矿工水平移动"}}),M=ge({group:{name:"矿工水平移动"}}),R=ge(c),V=ge({group:{name:"按钮相关"},type:d}),x=ge({group:{name:"按钮相关"},type:g}),F=ge({group:{name:"按钮相关"},type:g}),G=ge({group:{name:"按钮相关"},type:b}),U=ge(y),P((X=t((E=function(e){i(h,e);var t=o(h);function h(){var e;r(this,h);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),n(s(e),"startAngle",X,s(e)),n(s(e),"endAngle",W,s(e)),n(s(e),"rotateSpeed",j,s(e)),n(s(e),"hookoutSpeed",q,s(e)),n(s(e),"ropeLength",J,s(e)),n(s(e),"refreshDelay",K,s(e)),n(s(e),"affectOfStrengthenDose",Q,s(e)),n(s(e),"hookNode",Y,s(e)),l(s(e),"hookNodeOriPos",void 0),n(s(e),"hookHangingImg",Z,s(e)),n(s(e),"hookClosingImg",$,s(e)),n(s(e),"boyNode",ee,s(e)),n(s(e),"boyRightBy",te,s(e)),n(s(e),"boyLeftBy",ie,s(e)),n(s(e),"boyHorizontalSpeed",oe,s(e)),l(s(e),"boyDirect",1),l(s(e),"boyOriX",0),n(s(e),"bombPrefab",re,s(e)),n(s(e),"hookButton",ne,s(e)),n(s(e),"UseTNTImg",se,s(e)),n(s(e),"HookDownImg",le,s(e)),n(s(e),"TNTText",ae,s(e)),l(s(e),"originalAngle",void 0),l(s(e),"originalPos",void 0),l(s(e),"amplitude",void 0),n(s(e),"oriRopeLength",he,s(e)),n(s(e),"MinerBoyAni",ue,s(e)),l(s(e),"isHookOut",!1),l(s(e),"isBack",!1),l(s(e),"ore",0),l(s(e),"oreNode",void 0),l(s(e),"isSettlingore",!1),l(s(e),"rotateDirection",!1),l(s(e),"stretchVec",new f(0,0,0)),l(s(e),"tempVec",void 0),l(s(e),"colli",void 0),l(s(e),"ropeSprite",void 0),e}return a(h,[{key:"start",value:function(){B.registerMiner(this),this.colli=this.getComponentInChildren(m),this.colli.on(k.BEGIN_CONTACT,this.hookBack,this),this.amplitude=this.endAngle-this.startAngle,this.originalAngle=this.node.angle,this.originalPos=this.node.getPosition(),this.hookNodeOriPos=this.hookNode.getPosition(),this.boyOriX=this.boyNode.position.x;var e=this.node.getChildByName("rope");this.ropeSprite=e.getComponent(d),this.ropeSprite.fillRange=this.oriRopeLength/this.ropeLength,this.TNTText.enabled=!1;var t=B.getPlayerData().isEndlessMode;t&&(this.hookoutSpeed*=.85),B.getStrengthen&&(this.hookoutSpeed*=this.affectOfStrengthenDose,t&&(this.hookoutSpeed*=1.5))}},{key:"update",value:function(e){B.getIsGameOver()||(this.isHookOut?(this.tempVec=new f(0,0,0),f.multiplyScalar(this.tempVec,this.stretchVec,e),this.node.setPosition(this.node.getPosition().add(this.tempVec)),this.isBack&&null!=this.oreNode&&this.oreNode.setPosition(this.oreNode.getPosition().add(this.tempVec)),!this.isSettlingore&&this.getHookDistance()<=20&&this.isBack&&(this.isSettlingore=!0,this.TNTText.enabled=!1,this.stretchVec.multiplyScalar(0),this.hookNode.setPosition(this.hookNodeOriPos),this.ropeSprite.fillRange=this.oriRopeLength/this.ropeLength,this.node.setPosition(this.originalPos),this.settleore())):(this.node.angle=this.node.angle+this.getAngularSpeed()*e,this.boyHorizontalMove(e)))}},{key:"boyHorizontalMove",value:function(e){var t=this.boyNode.getPosition(),i=this.boyHorizontalSpeed*e;t.x>this.boyOriX+this.boyRightBy?this.boyDirect=-1:t.x<this.boyOriX+this.boyLeftBy&&(this.boyDirect=1),t.add3f(this.boyDirect*i,0,0),this.boyNode.setPosition(t)}},{key:"getAngularSpeed",value:function(){this.node.angle>this.endAngle?this.rotateDirection=!1:this.node.angle<this.startAngle&&(this.rotateDirection=!0);var e=this.node.angle-(this.startAngle+this.endAngle)/2;return(this.rotateDirection?1:-1)*(Math.cos(e/this.amplitude*Math.PI)+.5)*this.rotateSpeed}},{key:"getHookDistance",value:function(){var e=new f(0,0,0);f.subtract(e,this.originalPos,this.node.getPosition());var t=e.length();return this.ropeSprite.fillRange=(t+this.oriRopeLength)/this.ropeLength,t}},{key:"hookDown",value:function(e,t){if(!B.getIsGameOver())if(this.isHookOut){if(!this.isSettlingore){var i=B.getTNTNum();if(i>0){if(null==this.oreNode)return;this.destroyOre();var o=T(this.bombPrefab);o.parent=this.node.parent,o.setPosition(this.node.getPosition()),this.scheduleOnce((function(){o.destroy()}),.5),v.playTNTBomb(),B.setTNTNum(i-1),this.TNTText.string="剩余炸药:"+B.getTNTNum().toString(),this.isBack||this.stretchVec.multiplyScalar(-1),this.stretchVec.normalize().multiplyScalar(this.hookoutSpeed),this.isBack=!0}else C.redWarning(this.hookButton)}}else{this.hookButton.spriteFrame=this.UseTNTImg,this.isHookOut=!0,this.isBack=!1;var r=(this.node.angle-this.originalAngle-90)*Math.PI/180;this.stretchVec=new f(Math.cos(r),Math.sin(r),0),this.stretchVec.multiplyScalar(this.hookoutSpeed),v.playRope(),this.TNTText.enabled=!0;var n=B.getTNTNum();this.TNTText.color=n<=0?N.RED:N.WHITE,this.TNTText.string="剩余炸药:"+n.toString()}}},{key:"hookBack",value:function(e,t,i){if(!this.isBack)if(2==t.tag)this.stretchVec.multiplyScalar(-1),this.isBack=!0;else if(!this.isBack&&1==t.tag){this.oreNode=t.node;var o=this.oreNode.getComponent(z);this.MinerBoyAni.play(),this.stretchVec.multiplyScalar(-o.dragForce),this.isBack=!0,o.getCaught(),this.hookNode.getComponent(d).spriteFrame=this.hookClosingImg,this.ore=o.value}}},{key:"destroyOre",value:function(){null!=this.oreNode&&(this.oreNode.destroy(),this.oreNode=null),this.ore=0}},{key:"settleore",value:function(){null!=this.oreNode&&(B.setProfit(this.ore),C.setScoreAni(this.ore),v.playBonus(),this.destroyOre()),this.MinerBoyAni.pause(),this.hookNode.getComponent(d).spriteFrame=this.hookHangingImg,this.scheduleOnce((function(){this.isHookOut=!1,this.isSettlingore=!1,this.isBack=!1,this.hookButton.spriteFrame=this.HookDownImg}),this.oreNode?this.refreshDelay:0)}}]),h}(S)).prototype,"startAngle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-40}}),W=t(E.prototype,"endAngle",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),j=t(E.prototype,"rotateSpeed",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),q=t(E.prototype,"hookoutSpeed",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),J=t(E.prototype,"ropeLength",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2400}}),K=t(E.prototype,"refreshDelay",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),Q=t(E.prototype,"affectOfStrengthenDose",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Y=t(E.prototype,"hookNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(E.prototype,"hookHangingImg",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(E.prototype,"hookClosingImg",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(E.prototype,"boyNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(E.prototype,"boyRightBy",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=t(E.prototype,"boyLeftBy",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=t(E.prototype,"boyHorizontalSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=t(E.prototype,"bombPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(E.prototype,"hookButton",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(E.prototype,"UseTNTImg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(E.prototype,"HookDownImg",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(E.prototype,"TNTText",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(E.prototype,"oriRopeLength",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),ue=t(E.prototype,"MinerBoyAni",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=E))||_));h._RF.pop()}}}));

System.register("chunks:///_virtual/OreLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts","./GameController.ts"],(function(t){"use strict";var i,e,o,n,a,r,s,l,u,c,h,d,m,p,g,f,b,v,y,M,P,C,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inherits,o=t.createSuper,n=t.classCallCheck,a=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.defineProperty,l=t.createClass},function(t){u=t.cclegacy,c=t._decorator,h=t.CCInteger,d=t.Enum,m=t.SpriteFrame,p=t.Prefab,g=t.Vec3,f=t.Sprite,b=t.AnimationComponent,v=t.UITransform,y=t.find,M=t.instantiate,P=t.Component},function(t){C=t.AudioController},function(t){S=t.GameController}],execute:function(){var _,w,z,R,k,I,x,L,D,B,G,O,X,A,F,W,T,V,Z,E,Y,j,H,N,U,q,J,K,Q,$;u._RF.push({},"30170wPontLiI93GFNs0LRr","OreLogic",void 0);var tt,it=c.ccclass,et=c.property;!function(t){t[t.Gold=0]="Gold",t[t.Diamond=1]="Diamond",t[t.Bomb=2]="Bomb",t[t.RandomBag=3]="RandomBag",t[t.Rock=4]="Rock",t[t.Waste=5]="Waste"}(tt||(tt={}));t("OreLogic",(_=it("OreLogic"),w=et(h),z=et({type:d(tt)}),R=et({group:{name:"显示方案"},tooltip:"Add imgs into List if You want to change img of this node"}),k=et({type:[m],group:{name:"显示方案"}}),I=et({group:{name:"显示方案"}}),x=et({group:{name:"显示方案"}}),L=et({group:{name:"运动方案"},tooltip:"Modify the Start and End as well Add RigidBody2D if You want to move this node"}),D=et({group:{name:"运动方案"},tooltip:"向左移动的最大距离"}),B=et({group:{name:"运动方案"},tooltip:"向右移动的最大距离"}),G=et({group:{name:"运动方案"}}),O=et({group:{name:"爆炸素材"}}),X=et({type:p,group:{name:"爆炸素材"}}),A=et({type:m,group:{name:"爆炸素材"}}),_((T=i((W=function(t){e(u,t);var i=o(u);function u(){var t;n(this,u);for(var e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o)),a(r(t),"value",T,r(t)),a(r(t),"dragForce",V,r(t)),a(r(t),"type",Z,r(t)),a(r(t),"isMultiImgs",E,r(t)),a(r(t),"imgs",Y,r(t)),a(r(t),"isRotate",j,r(t)),a(r(t),"isZoom",H,r(t)),a(r(t),"isMoving",N,r(t)),a(r(t),"moveLeftX",U,r(t)),a(r(t),"moveRightX",q,r(t)),s(r(t),"moveOriX",void 0),a(r(t),"movingSpeed",J,r(t)),s(r(t),"faceTo",-1),s(r(t),"lastPosition",void 0),s(r(t),"randomMinValue",100),s(r(t),"randomMaxValue",600),a(r(t),"explodeRadium",K,r(t)),s(r(t),"MineMap",void 0),s(r(t),"_count",0),s(r(t),"_timeWaitDirectionChange",10),s(r(t),"_direction",0),s(r(t),"_deltaPos",new g(0,0,0)),s(r(t),"isStartMoving",!1),s(r(t),"contentSize",{width:0,height:0}),a(r(t),"bombPrefab",Q,r(t)),a(r(t),"brokenCeil",$,r(t)),t}return l(u,[{key:"start",value:function(){if(this.isMultiImgs){var t=Math.floor(Math.random()*this.imgs.length);this.getComponent(f).spriteFrame=this.imgs[t]}if(this.isRotate){var i=30*Math.random()*2-30;this.node.angle+=i}if(this.isZoom){var e=.2*Math.random()*2+.8,o=this.node.getScale();o.x*=e,o.y*=e,this.node.setScale(o)}if(this.isMoving){var n=this.getComponent(b);null!=n&&n.play(),this.isStartMoving=!0}}},{key:"update",value:function(t){this.isStartMoving&&this.movingAround(t)}},{key:"movingAround",value:function(t){this.lastPosition=this.node.getPosition(),this.isStudentCollison(this.lastPosition)?(this._direction=-Math.PI+this._direction,this._direction>2*Math.PI?this._direction-=2*Math.PI:this._direction<0&&(this._direction+=2*Math.PI)):this._count>this._timeWaitDirectionChange?(this._direction=function(t){var i=t+.5*Math.random()*Math.PI-.25*Math.PI;i>2*Math.PI?i-=2*Math.PI:i<0&&(i+=2*Math.PI);return i}(this._direction),this._count=0):this._count++,this._deltaPos.x=Math.cos(this._direction)*this.movingSpeed*t*10,this._deltaPos.y=Math.sin(this._direction)*this.movingSpeed*t*10,g.add(this.lastPosition,this.lastPosition,this._deltaPos),this.node.setPosition(this.lastPosition)}},{key:"isStudentCollison",value:function(t){var i=this.node.parent;return this.contentSize=i.getComponent(v).contentSize,t.x<30||t.x>this.contentSize.width-30||t.y<30||t.y>this.contentSize.height-30}},{key:"movingLeftRight",value:function(){this.lastPosition=this.node.getPosition(),this.lastPosition.x>this.moveOriX+this.moveRightX?(this.faceTo=-1,this.node.setScale(this.node.getScale().multiply3f(-1,1,1))):this.lastPosition.x<this.moveOriX-this.moveLeftX&&(this.faceTo=1,this.node.setScale(this.node.getScale().multiply3f(-1,1,1))),this.lastPosition.x+=this.movingSpeed*this.faceTo,this.node.setPosition(this.lastPosition)}},{key:"getCaught",value:function(){if(this.isMoving){this.isStartMoving=!1;var t=this.getComponent(b);t&&t.pause()}switch(this.type){case tt.Diamond:S.getDiamondPolish()&&(this.value*=1.5),C.playCatchDiamond();break;case tt.Gold:C.playCatchGold();break;case tt.RandomBag:this.value=this.randomMinValue+10*Math.round(Math.random()*(this.randomMaxValue-this.randomMinValue)/10),C.playCatchGold();break;case tt.Bomb:var i=y("Canvas/MineMap").children,e=this.node.getWorldPosition();this.getComponent(f).spriteFrame=this.brokenCeil,this.explodeInCircle(i,e);break;case tt.Rock:C.playStone()}}},{key:"explodeInCircle",value:function(t,i){var e=this,o=M(this.bombPrefab);this.node.parent.addChild(o),o.setScale(o.getScale().multiplyScalar(4.3)),o.setWorldPosition(i),this.scheduleOnce((function(){o.destroy()}),.5),C.playRoofBomb();var n=function(){if(!t[a])return"continue";var o=t[a].getComponent(u);if(!o)return"continue";var n=o.node.getWorldPosition(),r=g.clone(n).subtract(i).length();t[a].uuid!=e.node.uuid&&r<e.explodeRadium&&(o.type==tt.Bomb&&e.scheduleOnce((function(){e.explodeInCircle(t,n)}),.3),t[a].destroy())};for(var a in t)n()}}]),u}(P)).prototype,"value",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=i(W.prototype,"dragForce",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=i(W.prototype,"type",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return tt.Gold}}),E=i(W.prototype,"isMultiImgs",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=i(W.prototype,"imgs",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=i(W.prototype,"isRotate",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=i(W.prototype,"isZoom",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=i(W.prototype,"isMoving",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=i(W.prototype,"moveLeftX",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=i(W.prototype,"moveRightX",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),J=i(W.prototype,"movingSpeed",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),K=i(W.prototype,"explodeRadium",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),Q=i(W.prototype,"bombPrefab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=i(W.prototype,"brokenCeil",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=W))||F));u._RF.pop()}}}));

System.register("chunks:///_virtual/PingServer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./UIController.ts","./index.js"],(function(e){"use strict";var n,t,r,c,s,i,o,a,u,l;return{setters:[function(e){n=e.defineProperty,t=e.inherits,r=e.createSuper,c=e.classCallCheck,s=e.createClass},function(e){i=e.cclegacy,o=e._decorator,a=e.Component},null,function(e){u=e.UIController},function(e){l=e.default}],execute:function(){var p,f;i._RF.push({},"8c34bxgGrRN+Yz9Gjo+aUNi","PingServer",void 0);var g=o.ccclass;o.property;l.init({dsn:"https://e9feb0aa363d42189aa7d0527494a144@sentry.zjuqsc.com/9",release:"1.0.0",integrations:[new l.BrowserTracing],tracesSampleRate:1});e("PingServer",g("PingServer")((n(f=function(e){t(i,e);var n=r(i);function i(){return c(this,i),n.apply(this,arguments)}return s(i,[{key:"start",value:function(){fetch(i.path+"/ping").then((function(e){return e.json()})).then((function(e){console.log()})).catch((function(e){u.showToast("警告<br/>未连接到服务器,成绩将无法参与排名",4e3)}))}}]),i}(a),"path","https://www.qsc.zju.edu.cn/game/gold_miner/api"),p=f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopLogic.ts","./LevelConst.ts"],(function(e){"use strict";var i,t,r,n,a,o,l,s,c,u,y,p,h,m;return{setters:[function(e){i=e.defineProperty,t=e.applyDecoratedDescriptor,r=e.inherits,n=e.createSuper,a=e.classCallCheck,o=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){c=e.cclegacy,u=e._decorator,y=e.director,p=e.Component},function(e){h=e.CommoType},function(e){m=e.LevelConst}],execute:function(){var d,f,g,b,v,P,L,D,k,T,I,S;c._RF.push({},"482bai36RlJhZt7DDeG5K5E","PlayerData",void 0);var w=u.ccclass,z=u.property;e("PlayerData",w("PlayerData")((S=function(e){r(c,e);var t=n(c);function c(){var e;a(this,c);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n)),o(l(e),"isFirstTimePlay",g,l(e)),o(l(e),"playerName",b,l(e)),i(l(e),"userId",""),i(l(e),"money",150),i(l(e),"totalTime",90),i(l(e),"level",1),i(l(e),"targetMoney",150),i(l(e),"isEndlessMode",!1),o(l(e),"TNTNum",v,l(e)),o(l(e),"isDiamondPolish",P,l(e)),o(l(e),"isStrengthen",L,l(e)),o(l(e),"isLucky",D,l(e)),o(l(e),"isRockAppreciate",k,l(e)),i(l(e),"commodityPriceList",[75,75,75,50,75]),e}return s(c,[{key:"start",value:function(){c.hasInit?this.destroy():(y.addPersistRootNode(this.node),console.log("成功持久化 PlayData"),c.hasInit=!0,c.hasJustFinish=!1)}},{key:"dataInitialize",value:function(){var e=this;e.TNTNum=0,e.isDiamondPolish=e.isLucky=e.isRockAppreciate=e.isStrengthen=!1,e.isFirstTimePlay=!0,e.level=1,e.totalTime=100,e.targetMoney=150;for(var i=0;i<m.OriginalPrice.length;i++)e.commodityPriceList[i]=m.OriginalPrice[i];e.money=150}},{key:"dataToNextLevel",value:function(){var e=this;e.level++;for(var i=0;i<m.OriginalPrice.length;i++){var t=!1;(i===h.DIAMOND&&e.isDiamondPolish||i===h.ROCK&&e.isRockAppreciate||i===h.LUCKY&&e.isLucky||i===h.STRENGTH&&e.isStrengthen)&&(t=!0),e.commodityPriceList[i]=m.getPriceAdjust(e.level,i,t)}e.isDiamondPolish=e.isLucky=e.isRockAppreciate=e.isStrengthen=!1}},{key:"setUserId",value:function(e){this.userId=e}},{key:"getUserId",value:function(){return this.userId}}]),c}(p),i(S,"userIdLocalKey","QSCMinerUserId"),i(S,"highScoreLocalKey","QSCMinerHistoryHigh"),i(S,"hasInit",!1),i(S,"hasPlay",!1),i(S,"hasJustFinish",!1),g=t((f=S).prototype,"isFirstTimePlay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=t(f.prototype,"playerName",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"tomato"}}),v=t(f.prototype,"TNTNum",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=t(f.prototype,"isDiamondPolish",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=t(f.prototype,"isStrengthen",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=t(f.prototype,"isLucky",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=t(f.prototype,"isRockAppreciate",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(f,"userIdLocalKey",[z],(T=(T=Object.getOwnPropertyDescriptor(f,"userIdLocalKey"))?T.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return T}}),f),t(f,"highScoreLocalKey",[z],(I=(I=Object.getOwnPropertyDescriptor(f,"highScoreLocalKey"))?I.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return I}}),f),d=f))||d);c._RF.pop()}}}));

System.register("chunks:///_virtual/RankController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIController.ts","./SceneController.ts"],(function(e){"use strict";var n,a,r,t,i,o,l,c,u,d,s,g,b,p,y,v,w,f,m,L;return{setters:[function(e){n=e.defineProperty,a=e.applyDecoratedDescriptor,r=e.inherits,t=e.createSuper,i=e.classCallCheck,o=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,d=e._decorator,s=e.Prefab,g=e.Node,b=e.Label,p=e.CCString,y=e.instantiate,v=e.tween,w=e.Vec3,f=e.Component},function(e){m=e.UIController},function(e){L=e.SceneController}],execute:function(){var k,S,h,R,C,N,z,B,P,I,O,j,F,E,T,_,D,H,U,Z,x,A,M,J,V,W,$,q,G,K,Q,X;u._RF.push({},"bc66dIc51ZOHb7dOOwZJkZa","RankController",void 0);var Y=d.ccclass,ee=d.property;e("RankController",(k=Y("RankController"),S=ee(s),h=ee(s),R=ee(g),C=ee(b),N=ee(b),z=ee({type:[p],tooltip:"用户超越多少人显示的文案，从上到下为高档到低档",multiline:!0}),B=ee(b),P=ee(b),I=ee(b),O=ee(g),j=ee(b),F=ee(b),E=ee(g),T=ee(g),k((n(X=function(e){r(a,e);var n=t(a);function a(){var e;i(this,a);for(var r=arguments.length,t=new Array(r),c=0;c<r;c++)t[c]=arguments[c];return e=n.call.apply(n,[this].concat(t)),o(l(e),"oneRecordOdd",H,l(e)),o(l(e),"oneRecordEven",U,l(e)),o(l(e),"RankParentNode",Z,l(e)),o(l(e),"curScoreLabel",x,l(e)),o(l(e),"hisScoreLabel",A,l(e)),o(l(e),"judgeSentences",M,l(e)),o(l(e),"transcendPercentLabel",J,l(e)),o(l(e),"transcendRankLabel",V,l(e)),o(l(e),"judgement",W,l(e)),o(l(e),"rewardBoard",$,l(e)),o(l(e),"rewardBoardId",q,l(e)),o(l(e),"rewardRankLabel",G,l(e)),o(l(e),"LoadingNode",K,l(e)),o(l(e),"LoadingFailNode",Q,l(e)),e}return c(a,[{key:"onLoad",value:function(){(a.instance=this).rewardBoard.active=!1}},{key:"replay",value:function(e,n){L.loadScene("StartPage")}}],[{key:"showTwoScore",value:function(e,n){var r=a.instance;r.curScoreLabel.string=e.toString(),r.hisScoreLabel.string=n.toString()}},{key:"showHisScore",value:function(e){a.instance.hisScoreLabel.string=e.toString()}},{key:"showWholeRank",value:function(e){var n=a.instance;console.log(e);for(var r=0;r<e.length;r++){var t=null;t=y(r%2==1?n.oneRecordOdd:n.oneRecordEven),console.log(e[r]),t.getChildByName("RankNumberLabel").getComponent(b).string=e[r].rank.toString(),t.getChildByName("RankNameLabel").getComponent(b).string=e[r].username.toString(),t.getChildByName("RankScoreLabel").getComponent(b).string="$"+e[r].score.toString(),r>=48?t.setScale(t.getScale().multiplyScalar(.8)):r>=6&&t.setScale(t.getScale().multiplyScalar(.9)),n.RankParentNode.addChild(t)}}},{key:"showUserRank",value:function(e,n){var r=a.instance;r.transcendPercentLabel.string=n+"%",r.transcendRankLabel.string="第"+e.toString()+"名",r.judgement.string=r.judgeSentences[3-Math.ceil(parseInt(n)/100*3)]}},{key:"showLoading",value:function(){var e=a.instance;e.LoadingFailNode.active=!1,e.LoadingNode.active=!0}},{key:"successLoading",value:function(){var e=a.instance;e.LoadingFailNode.active=!1,e.LoadingNode.active=!1}},{key:"failLoading",value:function(){var e=a.instance;e.LoadingNode.active=!1,e.LoadingFailNode.active=!0}},{key:"showReward",value:function(e,n){var r=a.instance;r.rewardBoard.active=!0,r.rewardRankLabel.string="您的历史最高名次:"+n.toString(),r.rewardBoardId.string=e,v().target(r.rewardBoard).to(.5,{position:new w(0,164.042,0)},{easing:"cubicOut"}).start()}},{key:"closeReward",value:function(){v().target(a.instance.rewardBoard).to(.5,{position:new w(0,-2040.029,0)},{easing:"cubicOut"}).call((function(){a.instance.rewardBoard.active=!1})).start()}},{key:"copy",value:function(e){try{var n=document.createElement("input");n.setAttribute("value",e),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),m.showToast("复制成功!",1e3),a.closeReward()}catch(e){m.showToast("复制失败，请手动复制",1e3)}}}]),a}(f),"instance",null),H=a((D=X).prototype,"oneRecordOdd",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=a(D.prototype,"oneRecordEven",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=a(D.prototype,"RankParentNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=a(D.prototype,"curScoreLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=a(D.prototype,"hisScoreLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=a(D.prototype,"judgeSentences",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=a(D.prototype,"transcendPercentLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=a(D.prototype,"transcendRankLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=a(D.prototype,"judgement",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=a(D.prototype,"rewardBoard",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=a(D.prototype,"rewardBoardId",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=a(D.prototype,"rewardRankLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=a(D.prototype,"LoadingNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=a(D.prototype,"LoadingFailNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=D))||_));u._RF.pop()}}}));

System.register("chunks:///_virtual/SceneController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts"],(function(e){"use strict";var n,o,c,r,t,l,u,a,i;return{setters:[function(e){n=e.inherits,o=e.createSuper,c=e.classCallCheck,r=e.createClass},function(e){t=e.cclegacy,l=e._decorator,u=e.director,a=e.Component},function(e){i=e.AudioController}],execute:function(){var s;t._RF.push({},"62818/ukFhNQ6b1hxUu/SGq","SceneController",void 0);var S=l.ccclass;l.property,e("SceneController",S("SceneController")(s=function(e){n(l,e);var t=o(l);function l(){return c(this,l),t.apply(this,arguments)}return r(l,null,[{key:"loadSettlingScoreScene",value:function(e){e>9999?u.loadScene("GameScene"):u.loadScene("EndScene")}},{key:"preloadScene",value:function(e){u.preloadScene(e)}},{key:"loadScene",value:function(e){i.playButtonClick(),u.loadScene(e)}}]),l}(a))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShopLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerData.ts","./SceneController.ts","./UIController.ts","./CommodityData.ts","./AudioController.ts"],(function(e){"use strict";var t,i,o,n,s,a,r,c,l,m,p,u,h,y,D,d,g,f,b,C,P,k,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,o=e.createSuper,n=e.classCallCheck,s=e.defineProperty,a=e.assertThisInitialized,r=e.initializerDefineProperty,c=e.createClass},function(e){l=e.cclegacy,m=e._decorator,p=e.Node,u=e.SpriteFrame,h=e.Label,y=e.AnimationComponent,D=e.find,d=e.Sprite,g=e.Button,f=e.Component},function(e){b=e.PlayerData},function(e){C=e.SceneController},function(e){P=e.UIController},function(e){k=e.CommodityData},function(e){S=e.AudioController}],execute:function(){var L,T,N,v,B,w,A,I,R,z,M,_,K,F,O,U,H,G,E,Y,j;e("CommoType",void 0),l._RF.push({},"5fa8bB820lAl4KjWarmV5HU","ShopLogic",void 0);var W,$=m.ccclass,x=m.property;!function(e){e[e.TNT=0]="TNT",e[e.DIAMOND=1]="DIAMOND",e[e.STRENGTH=2]="STRENGTH",e[e.LUCKY=3]="LUCKY",e[e.ROCK=4]="ROCK"}(W||(W=e("CommoType",{})));e("ShopLogic",(L=$("ShopLogic"),T=x({type:[p]}),N=x({type:u}),v=x({type:[u]}),B=x({type:h}),w=x({type:h}),A=x({type:h}),I=x({type:y}),R=x({type:u,tooltip:"商品未选中的默认框"}),z=x({type:u,tooltip:"商品已选中时展现的框"}),L((K=t((_=function(e){i(l,e);var t=o(l);function l(){var e;n(this,l);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),s(a(e),"PD",void 0),r(a(e),"commodities",K,a(e)),s(a(e),"commoDatas",[]),r(a(e),"sold_out",F,a(e)),r(a(e),"icon",O,a(e)),r(a(e),"moneyLabel",U,a(e)),r(a(e),"user_nameLabel",H,a(e)),r(a(e),"msgLabel",G,a(e)),r(a(e),"shopKeeperAni",E,a(e)),r(a(e),"unselectedBlock",Y,a(e)),r(a(e),"selectedBlock",j,a(e)),s(a(e),"lastSelected",-1),e}return c(l,[{key:"onLoad",value:function(){this.PD=D("PlayerData").getComponent(b)}},{key:"start",value:function(){var e=this,t=function(t){e.commoDatas[t]=e.commodities[t].getComponent(k),e.commoDatas[t].price=e.PD.commodityPriceList[t],e.commodities[t].on(p.EventType.TOUCH_START,(function(i){e.setMsg(parseInt(t))}),e),e.commodities[t].getComponentInChildren(h).string="$ "+e.commoDatas[t].price.toString()};for(var i in this.commodities)t(i);this.renewMoney(),this.user_nameLabel.string=this.PD.playerName}},{key:"StartGame",value:function(e){C.loadScene("GameScene")}},{key:"setMsg",value:function(e){this.msgLabel.string=this.commoDatas[e].description,this.lastSelected!=e?(this.commodities[e].getComponent(d).spriteFrame=this.selectedBlock,-1!=this.lastSelected&&(this.commodities[this.lastSelected].getComponent(d).spriteFrame=this.unselectedBlock),this.lastSelected=e):(this.commodities[e].getComponent(d).spriteFrame=this.unselectedBlock,this.lastSelected=-1),S.playButtonClick(),this.shopKeeperAni.play()}},{key:"renewMoney",value:function(){this.moneyLabel.string=this.PD.money.toString()}},{key:"BuyItem",value:function(e,t){console.log("res:",t);var i=parseInt(t)-1;if(this.setMsg(i),this.commoDatas[i].leftNum>0)if(this.PD.money>=this.commoDatas[i].price){switch(0!=i&&(this.commodities[i].getChildByName("priceTag").getComponent(h).string="取消"),i){case W.TNT:this.PD.TNTNum++,this.PD.money-=this.commoDatas[i].price;break;case W.DIAMOND:this.PD.isDiamondPolish=!0,this.PD.money-=this.commoDatas[i].price;break;case W.STRENGTH:this.PD.isStrengthen=!0,this.PD.money-=this.commoDatas[i].price;break;case W.LUCKY:this.PD.isLucky=!0,this.PD.money-=this.commoDatas[i].price;break;case W.ROCK:this.PD.isRockAppreciate=!0,this.PD.money-=this.commoDatas[i].price}S.playBuyItem(),this.renewMoney(),--this.commoDatas[i].leftNum<=0&&(this.commodities[i].getChildByName("icon").getComponent(d).spriteFrame=this.sold_out),0==this.commoDatas[0].leftNum&&(this.commodities[0].getChildByName("绿框").getComponent(g).interactable=!1)}else P.redWarning(this.moneyLabel.node.getParent().getComponent(d));else{switch(i){case 0:case 1:this.PD.isDiamondPolish&&(this.PD.isDiamondPolish=!1,this.PD.money+=this.commoDatas[i].price);break;case 2:this.PD.isStrengthen&&(this.PD.isStrengthen=!1,this.PD.money+=this.commoDatas[i].price);break;case 3:this.PD.isLucky&&(this.PD.isLucky=!1,this.PD.money+=this.commoDatas[i].price);break;case 4:this.PD.isRockAppreciate&&(this.PD.isRockAppreciate=!1,this.PD.money+=this.commoDatas[i].price)}S.playBuyItem(),this.renewMoney(),this.commoDatas[i].leftNum++,this.commodities[i].getChildByName("priceTag").getComponent(h).string="$ "+this.commoDatas[i].price.toString(),this.commodities[i].getChildByName("icon").getComponent(d).spriteFrame=this.icon[i]}}}]),l}(f)).prototype,"commodities",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(_.prototype,"sold_out",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(_.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=t(_.prototype,"moneyLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(_.prototype,"user_nameLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(_.prototype,"msgLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(_.prototype,"shopKeeperAni",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(_.prototype,"unselectedBlock",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(_.prototype,"selectedBlock",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=_))||M));l._RF.pop()}}}));

System.register("chunks:///_virtual/StartPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts","./PlayerData.ts","./SceneController.ts","./index.mjs_cjs=&original=.js","./UIController.ts","./index.js"],(function(e){"use strict";var t,n,i,a,r,o,s,l,c,u,d,h,p,g,y,f,m,S,v,P,I,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,i=e.createSuper,a=e.classCallCheck,r=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.defineProperty,l=e.createClass},function(e){c=e.cclegacy,u=e._decorator,d=e.Node,h=e.sys,p=e.director,g=e.find,y=e.Button,f=e.EditBox,m=e.Component},function(e){S=e.AudioController},function(e){v=e.PlayerData},function(e){P=e.SceneController},null,function(e){I=e.UIController},function(e){k=e.default}],execute:function(){var C,D,b,B,N,U,w,z,x;c._RF.push({},"aeeb1xg2m9JQIHuzTuqDZIO","StartPage",void 0);var T,j=u.ccclass,E=u.property;e("StartPage",(C=j("StartPage"),D=E({type:v}),b=E({type:d}),B=E({type:[d]}),C((w=t((U=function(e){n(c,e);var t=i(c);function c(){var e;a(this,c);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),r(o(e),"PD",w,o(e)),r(o(e),"inputBlock",z,o(e)),r(o(e),"description",x,o(e)),s(o(e),"UsernameNode",null),s(o(e),"userIds",null),e}return l(c,[{key:"onLoad",value:function(){this.userIds=h.localStorage.getItem(v.userIdLocalKey),null==this.userIds&&(this.userIds=this.randUserId(),h.localStorage.setItem(v.userIdLocalKey,this.userIds)),"StartPage"==p.getScene().name&&0==v.hasInit?this.ShowInputbox():this.inputBlock.active=!1,this.UsernameNode=this.inputBlock.getChildByName("上传框").getChildByName("输入框"),P.preloadScene("Shop"),P.preloadScene("GameScene"),P.preloadScene("RankPage")}},{key:"start",value:function(){this.PD=g("PlayerData").getComponent(v),this.PD.setUserId(this.userIds)}},{key:"GoShop",value:function(e){this.PD.dataInitialize(),this.PD.isEndlessMode=!1,P.loadScene("Shop")}},{key:"GoEndlessTrial",value:function(e){this.PD.dataInitialize(),this.PD.isEndlessMode=!0,this.PD.level=1,P.loadScene("TrialHall")}},{key:"ShowInputbox",value:function(){this.node.getChildByName("StartPagePerson").getChildByName("Start").getComponent(y).interactable=!1,this.inputBlock.active=!0}},{key:"EnterGame",value:function(e){""!=(T=this.UsernameNode.getComponent(f).string)?T.length>10?I.showToast("请输入十个字符以下的名字!",900):(this.PD.playerName=T,console.log("username:",T),k.setUser({id:this.PD.getUserId(),name:T}),S.playButtonClick(),this.inputBlock.active=!1,this.node.getChildByName("StartPagePerson").getChildByName("Start").getComponent(y).interactable=!0):I.showToast("请输入用户名!",1e3)}},{key:"Description",value:function(e,t){switch(parseInt(t)-1){case 0:this.description[0].active=!0;break;case 1:this.description[0].active=!1,this.description[1].active=!0;break;case 2:this.description[2].active=!0,this.description[1].active=!1;break;case 3:this.description[2].active=!1}}},{key:"gotoRank",value:function(){P.loadScene("RankPage")}},{key:"randUserId",value:function(){for(var e="",t=0;t<10;t++)e=e.concat(String.fromCharCode(65+Math.floor(57*Math.random())));return e}}]),c}(m)).prototype,"PD",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"inputBlock",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"description",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=U))||N));c._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./AudioController.ts"],(function(e){"use strict";var t,n,o,r,i,l,a,c,u,s,p,g,b,d,f,y,S,m,v;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,o=e.inherits,r=e.createSuper,i=e.classCallCheck,l=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,s=e._decorator,p=e.Label,g=e.Sprite,b=e.Node,d=e.Color,f=e.tween,y=e.Vec3,S=e.Component},function(e){m=e.GameController},function(e){v=e.AudioController}],execute:function(){var h,I,k,w,C,T,A,x,z,L,F,D,E,R,P,B,H,W,M,N,O,U,_,G;u._RF.push({},"aebd0dqEE9OaodWHvMdgP9Z","UIController",void 0);var Z=s.ccclass,j=s.property;e("UIController",(h=Z("UIController"),I=j(p),k=j(p),w=j(g),C=j(g),T=j(g),A=j(g),x=j(p),z=j(b),L=j(p),F=j(b),h((G=function(e){o(u,e);var n=r(u);function u(){var e;i(this,u);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r)),l(a(e),"TimeText",R,a(e)),l(a(e),"ScoreText",P,a(e)),l(a(e),"StrengthenIcon",B,a(e)),l(a(e),"LuckyIcon",H,a(e)),l(a(e),"RockAppreciateIcon",W,a(e)),l(a(e),"DiamondPolishIcon",M,a(e)),l(a(e),"ScoreAniLabel",N,a(e)),l(a(e),"FinalScoreBoard",O,a(e)),l(a(e),"FinalScore",U,a(e)),l(a(e),"submitButton",_,a(e)),t(a(e),"ScoreAni",void 0),e}return c(u,[{key:"onLoad",value:function(){u.instance=this}},{key:"start",value:function(){var e=u.instance;e.LuckyIcon.color=u.getColor(m.getLucky()),e.StrengthenIcon.color=u.getColor(m.getStrengthen()),e.DiamondPolishIcon.color=u.getColor(m.getDiamondPolish()),e.RockAppreciateIcon.color=u.getColor(m.getRockAppreciate()),e.ScoreAni=e.ScoreAniLabel.node,e.FinalScoreBoard.active=!1}}],[{key:"getColor",value:function(e){return e?d.WHITE:d.GRAY}},{key:"setTime",value:function(e){if(!(e<=0)){var t=e/60,n=e%60;u.instance.TimeText.string=(t<10?"0":"")+Math.floor(t).toString()+":"+(n<10?"0":"")+n.toString()}}},{key:"setScore",value:function(e){u.instance.ScoreText.string=e.toString()}},{key:"setScoreAni",value:function(e){u.instance.ScoreAniLabel.string="$"+e.toString(),f().target(u.instance.ScoreAni).to(0,{position:new y(600,1330,0),scale:y.ONE}).to(.2,{position:new y(480,1672,0),scale:new y(2,2,2)}).to(.6,{position:new y(251,1661,0),scale:y.ZERO}).call((function(){u.setScore(m.getPlayerData().money)})).start()}},{key:"showToast",value:function(e,t){t=isNaN(t)?3e3:t;var n=document.createElement("div");n.innerHTML=e,n.style.cssText="font-size: 1.5em;color: rgb(255, 255, 255);background-color: rgba(0, 0, 0, 0.6);padding: 10px 15px;margin: 0 0 0 -75px;border-radius: 4px;position: fixed; top: 50%;left: 50%;width: 150px;text-align: center;",document.body.appendChild(n),setTimeout((function(){n.style.opacity="0",setTimeout((function(){document.body.removeChild(n)}),500)}),t)}},{key:"ShowFinalScore",value:function(e){u.instance.FinalScoreBoard.active=!0,u.instance.FinalScore.string=e.toString(),f().target(u.instance.FinalScoreBoard).to(.5,{position:new y(525,838,0)},{easing:"cubicOut"}).call((function(){})).start()}},{key:"redWarning",value:function(e){e.color=d.RED;var t=0,n=setInterval((function(){t++,e.color=t%2==1?d.WHITE:d.RED,t>=5&&(clearInterval(n),e.color=d.WHITE)}),100);v.playWarn()}}]),u}(S),t(G,"instance",null),R=n((E=G).prototype,"TimeText",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=n(E.prototype,"ScoreText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=n(E.prototype,"StrengthenIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=n(E.prototype,"LuckyIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=n(E.prototype,"RockAppreciateIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=n(E.prototype,"DiamondPolishIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=n(E.prototype,"ScoreAniLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=n(E.prototype,"FinalScoreBoard",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(E.prototype,"FinalScore",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=n(E.prototype,"submitButton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=E))||D));u._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});